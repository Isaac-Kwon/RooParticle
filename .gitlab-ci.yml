image: gitlab-registry.cern.ch/mkwon/rooparticle:latest

stages:
  - build
  - test
  - qa

cache:
 paths:
   - /builds/mkwon/RooParticle/build
 key: "$CI_BUILD_REF"

build:
    stage: build
    script:
        - source /~/~/root6/root/bin/thisroot.sh
        - mkdir build
        - (cd build && cmake3 ../ && make -j9)

test:
    stage: test
    script:
        - source /~/~/root6/root/bin/thisroot.sh
        - (cd build && ./test_rutherford)
        - (cd build && ./test_collider_HeHe)
        - (cd build && ./test_3body_uniform)

qa_fixed:
    stage: qa
    script:
        - echo "Start QA Fixed Target"
    environment:
        name: FixedTarget
        url: https://web.cern.ch/

qa_collide:
    stage: qa
    script:
        - echo "Start QA Colliding"
    environment:
        name: Colliding
        url: https://web.cern.ch/

qa_3body:
    stage: qa
    script:
        - echo "Start QA 3body"
    environment:
        name: Colliding
        url: https://web.cern.ch/
    
